# XPath Basics

## 서론

- XPath 쿼리의 형식과 기능을 설명 가능
- Mendix Studio Pro에서 XPath를 추가할 수 있는 위치를 알 수 있음
- 단일 속성 XPath를 사용하여 휴가 요청 애플리케이션을 개선 가능

## 왜 우리가 XPath를 사용해야 하는지?

- **XPath**
    - Mendix가 데이터와 상호 작용할 때 도메인 모델을 탐색하는 데 사용하는 언어
    - 개발자가 보고 싶은 특정 데이터를 얻을 수 있는 서면 방법을 제공함
    - 데이터 속성 간의 관계를 지정하는 서면 구문
    - 도메인 모델의 연관 및 속성 구조와 원활하게 결합되어 쿼리를 한 눈에 이해할 수 있게 만듦
- Mendix는 데이터베이스 보편성과 사용 용이성 때문에 SQL 또는 OQL과 같은 유사한 구문보다 XPath를 사용함
    
    → OQL(Object Query Language) : 객체 지향 데이터베이스를 쿼리하기 위해 설계된 쿼리 언어
    
- 화면의 모든 데이터를 한 번에 보는 대신 XPath는 엔터티, 속성, 연결 및 변수를 사용하여 데이터를 제한할 수 있는 방법을 제공
- 지능형 애플리케이션에는 사려 깊은 데이터 표현이 필요함

- 예시
    - 사용자가 웹 사이트에서 제품을 주문한 경우, XPath를 사용하여 Mendix 데이터베이스에 액세스하고 사용자 주문 및 주문한 제품에 대한 정보를 검색할 수 있음
    - 이를 통해 Mendix 페이지에서 해당 특정 제품 목록을 표시할 수 있음
    

## 휴가 요청 관리를 위해 XPath 사용

- 앱이 수행해야 할 작업
    - 직원(Employees)은 휴가 요청을 생성할 수 있어야 하고, 관리자는 직속 부하 직원의 요청을 승인할 수 있어야 함
    - 보안 데이터는 매우 중요하므로 직원이 자신의 요청만 볼 수 있도록 해야 함
    - 관리자(Managers)는 직속 부하 직원의 요청만 관리할 수 있어야 함
    - 관리자(Administrator)는 모든 직원과 관리자(Managers)의 요청을 볼 수 있어야 함. 또한, 각 요청을 승인할 관리자(Managers)를 지정하는 일도 담당해야 함

## XPath는 어디에 사용되나요?

- XPath는 Mendix 플랫폼 전체에서 데이터베이스의 데이터 흐름을 제어하는 데 사용됨
- 데이터베이스에서 데이터가 검색되는 거의 모든 위치에서 XPath 쿼리를 활용할 수 있음
- 대부분의 경우, XPath는 XPath Constraint라는 창에 작성됨

**XPaths on Pages**

- 데이터 그리드 및 목록 보기와 같은 목록 위젯의 제약 조건을 사용하면 표시되는 항목을 정의할 수 있음
- 참조 선택기(Reference Selectors)의 제약 조건을 사용하면 사용자에게 표시되는 선택 가능 개체(Selectable objects)를 정의할 수 있음
    - 예를 들어, 참조 선택기를 사용하여 ‘주문’에 대한 ‘제품’을 선택할 때 XPath 제약 조건을 사용하여 특정 제품만 목록에 표시되도록 할 수 있음
    - XPath 제약 조건
        
        → [System.UserRoles = ‘[%UserRole_Manager%]’]
        

**XPaths in Microflows**

- XPath는 데이터베이스에서 반환되는 데이터를 정의하기 위해 ‘검색’ 작업의 마이크로플로우에 사용됨

**XPaths in Security**

- 도메인 모델 보안 구성의 엔터티 액세스 규칙에 XPath 제약 조건을 추가할 수 있음

## XPath를 구조화하는 방법

- XPath 문은 Mendix 런타임의 올바른 해석을 위해 따라야 하는 특정 구문을 따름
- XPath는 도메인 모델을 직접 참조하며 엔터티, 속성 및 연결을 직접 참조할 수 있음

![xpath_1.png](/Mendix/image/xpath_1.png)

- XPath 제약 조건에는 토큰이라는 다음과 같은 구조적 요소도 포함함

![xpath_2.png](/Mendix/image/xpath_2.png)

## Mendix가 어떻게 나를 도울 수 있을까?

- Mendix 플랫폼은 자동 완성 옵션을 통해 XPath 제약 조건을 구성할 때 도움을 줄 수 있음
- [(여는 괄호) 또는 /(슬래시)를 입력하면 자동 완성 기능을 자동으로 열림
- Ctrl + Space를 눌러 자동 완성에 액세스할 수도 있음
    
    → 이는 잘못 입력하거나 다른 곳을 클릭하여 자동 완성 기능을 잃어버렸을 때 특히 편리함
    
- XPath 제약 조건을 만들 때 염두에 두어야 할 몇 가지 사항은 다음과 같다
    1. 도메인 모델에서 검색 중인 엔터티를 식별한다
    2. 해당 엔터티에서 데이터를 제한하는 데 사용할 속성 and / or 연결에 대한 경로를 식별한다
    3. 위의 구성 요소를 사용하여 XPath 표현식을 구성한다
- 더 쉽게 만드는 팁
    1. 도메인 모델을 알아볼 것. 도메인 모델 구조에 익숙하지 않으면 올바른 경로를 선택하기 어려울 수 있음
    2. 잘 구성된 도메인 모델을 갖는다. XPath를 쉽게 구성하고 가독성을 높이려면 엔터티, 연결 및 속성을 이해하는 것이 중요함
        1. 엔터티 및 속성 이름은 기술적인 이름이 아닌 자신이 나타내는 내용을 설명해야 함
        2. 예를 들어, 고객 대신 고객과 같이 엔터티에는 단수 이름을 사용한다
        3. 동일한 엔터티 간에 여러 연결이 있는 경우, 연결 이름을 고유하게 만들 것
            1. VacationRequest_Account 및 VacationRequest_Account_2는 연결 간의 차이점을 설명하지 않음
            2. VacationRequest_Submitter 및 VacationRequest_Approver는 XPath를 읽을 때 한 눈에 읽을 수 있음
    3. 도메인 모델과 XPath 편집기를 양쪽에 사용하여 화면을 분할하면 올바른 경로를 찾는 데 도움이 될 수 있음

## 요약

- XPath Basic에서 XPath의 목적, 경로 작성 방법, Mendix Studio Pro에서 유용한 위치 등 XPath의 기본 사항을 배움
    - XPath가 Mendix 플랫폼의 일부인 이유
    - Mendix에서 XPath를 사용할 수 있는 곳
    - XPath의 모양과 구성 방법